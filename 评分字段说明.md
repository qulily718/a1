# 评分字段含义说明

## 📊 核心评分字段

### 1. **买入评分 (buy_score)**
**含义**：基于多个技术指标累加的买入信号强度分数

**计算方法**：通过以下技术指标累加得到：

| 指标 | 条件 | 加分 |
|------|------|------|
| **移动平均线 (MA)** | 完整多头排列（价格>MA5>MA10>MA20） | +2分 |
| | 短期多头排列（价格>MA5>MA10） | +1分 |
| **RSI相对强弱指标** | RSI超卖（RSI < 30） | +3分 |
| | RSI处于低位（30 ≤ RSI ≤ 50） | +1分 |
| | RSI底背离（价格创新低，RSI未创新低） | +2分 |
| **MACD指标** | MACD金叉（MACD上穿信号线） | +2分 |
| | MACD柱状图为正 | +1分 |
| | MACD上穿零轴 | +1分 |
| **布林带 (BB)** | 价格触及下轨 | +2分 |
| | 布林带张口且价格上涨 | +1分 |
| **成交量** | 放量上涨（成交量>平均成交量×阈值） | +1分 |
| | 量价背离：下跌但缩量 | +1分 |

**理论最大值**：约18分（所有买入信号同时满足）

---

### 2. **卖出评分 (sell_score)**
**含义**：基于多个技术指标累加的卖出信号强度分数

**计算方法**：通过以下技术指标累加得到：

| 指标 | 条件 | 加分 |
|------|------|------|
| **移动平均线 (MA)** | 完整空头排列（价格<MA5<MA10<MA20） | +2分 |
| | 短期空头排列（价格<MA5<MA10） | +1分 |
| **RSI相对强弱指标** | RSI超买（RSI > 70） | +3分 |
| | RSI处于高位（50 < RSI ≤ 70） | +1分 |
| | RSI顶背离（价格创新高，RSI未创新高） | +2分 |
| **MACD指标** | MACD死叉（MACD下穿信号线） | +2分 |
| | MACD柱状图为负 | +1分 |
| | MACD下穿零轴 | +1分 |
| **布林带 (BB)** | 价格触及上轨 | +2分 |
| | 布林带张口且价格下跌 | +1分 |
| **成交量** | 放量下跌（成交量>平均成交量×阈值） | +1分 |
| | 量价背离：上涨但缩量 | +1分 |

**理论最大值**：约18分（所有卖出信号同时满足）

---

### 3. **净评分 (net_score)**
**含义**：买入评分与卖出评分的差值，反映多空力量对比

**计算公式**：
```
net_score = buy_score - sell_score
```

**解读**：
- **net_score > 0**：买入力量强于卖出力量
- **net_score < 0**：卖出力量强于买入力量
- **net_score = 0**：多空力量均衡

**信号判断阈值**：
- `net_score ≥ 8`：**强烈买入** (STRONG_BUY)
- `net_score ≥ 4`：**买入** (BUY)
- `net_score ≥ 2`：**谨慎买入** (CAUTIOUS_BUY)
- `-2 < net_score < 2`：**持有观望** (HOLD)
- `net_score ≤ -2`：**谨慎卖出** (CAUTIOUS_SELL)
- `net_score ≤ -4`：**卖出** (SELL)
- `net_score ≤ -8`：**强烈卖出** (STRONG_SELL)

---

### 4. **信号强度 (strength)**
**含义**：信号强度的百分比值（0-100%），反映信号的可靠性和强度

**计算公式**（以买入信号为例）：
```python
# 1. 基础强度：买入分数在总分数中的占比
base_strength = (buy_score / total_score) * 100
# 其中 total_score = buy_score + sell_score

# 2. 分数因子：买入分数相对于最大可能分数的占比
max_possible_buy_score = 18
score_factor = min((buy_score / max_possible_buy_score) * 100, 100)

# 3. 综合计算：基础强度占60%，分数因子占40%
strength = base_strength * 0.6 + score_factor * 0.4

# 4. 单日涨幅过大惩罚（规避追高风险）
if 单日涨幅 > 9.5%:
    strength = strength * 0.3  # 降权至30%
elif 单日涨幅 > 7.0%:
    strength = strength * 0.6  # 降权至60%
elif 单日涨幅 > 5.0%:
    strength = strength * 0.8  # 降权至80%
```

**强度等级划分**：
- **≥ 80%**：极强
- **≥ 70%**：强
- **≥ 60%**：中等
- **≥ 50%**：弱
- **≥ 40%**：很弱
- **< 40%**：极弱

**设计理念**：
- **基础强度 (60%权重)**：反映买入信号在多空对比中的相对优势
- **分数因子 (40%权重)**：反映买入信号的绝对强度
- **涨幅惩罚**：单日涨幅过大时降低强度，规避追高风险

---

## 📈 使用建议

### 如何解读这些评分？

1. **买入评分 vs 卖出评分**
   - 如果 `buy_score` 远大于 `sell_score`，说明技术面偏向买入
   - 如果 `sell_score` 远大于 `buy_score`，说明技术面偏向卖出

2. **净评分**
   - `net_score ≥ 4`：可以考虑买入
   - `net_score ≥ 8`：强烈买入信号
   - `net_score` 接近0：多空均衡，建议观望

3. **信号强度**
   - `strength ≥ 70%`：信号可靠性高，可以重点关注
   - `strength < 50%`：信号较弱，需要谨慎
   - 注意：即使 `net_score` 较高，如果 `strength` 较低，也要谨慎操作

4. **综合判断**
   - **高净评分 + 高强度**：最佳买入时机
   - **高净评分 + 低强度**：可能是追高，需要谨慎
   - **低净评分**：不建议操作，即使强度较高

---

## 🔍 示例解读

假设某只股票的评分如下：
- `buy_score = 8`
- `sell_score = 2`
- `net_score = 6`
- `strength = 65%`

**解读**：
- 买入信号明显强于卖出信号（8分 vs 2分）
- 净评分为6分，属于"买入"级别（≥4且<8）
- 信号强度为65%，属于"中等"强度
- **结论**：这是一个中等强度的买入信号，可以考虑买入，但需要结合其他因素（如板块、市场环境等）综合判断

---

## ⚠️ 注意事项

1. **这些评分仅基于技术指标**，不包含基本面、消息面等因素
2. **单日涨幅过大时会自动降权**，避免追高风险
3. **建议结合预测评分 (predictive_score)** 一起使用，预测评分考虑了板块共识、市场趋势等因素
4. **不同周期（1mo, 3mo, 6mo, 1y）的阈值会自适应调整**，以适应不同时间尺度的分析
